<!DOCTYPE html>
<head>
<title>COGS 121</title>

<script src="jquery-3.3.1.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
<link rel="stylesheet" href="../css/account_edit.css"/>

<script type="text/javascript">
 $(document).ready(() => {
     ('#searchBtn')
 })
</script>



<script src="jquery-3.3.1.min.js"></script>

<script type="text/javascript">
// jQuery convention for running when the document has been fully loaded:
$(document).ready(() => {
  $('#readButton').click(() => {
    const requestURL = 'users/' + $('#nameBox').val();
    console.log('making ajax request to:', requestURL);
    // From: http://learn.jquery.com/ajax/jquery-ajax-methods/
    // Using the core $.ajax() method since it's the most flexible.
    // ($.get() and $.getJSON() are nicer convenience functions)
    $.ajax({
      // all URLs are relative to http://localhost:3000/
      url: requestURL,
      type: 'GET',
      dataType : 'json', // this URL returns data in JSON format
      success: (data) => {
        console.log('You received some data!', data);
        if (data.password) {
          $('#status').html('Successfully fetched data at URL: ' + requestURL);
          $('#jobDiv').html('My job is ' + data.password);
        } else {
          $('#status').html('Error: could not find user at URL: ' + requestURL);
          // clear the display
          $('#jobDiv').html('');
        }
      },
    });
  });
  $('#allUsersButton').click(() => {
    $.ajax({
      url: 'users',
      type: 'GET',
      dataType : 'json',
      success: (data) => {
        console.log('You received some data!', data);
        $('#status').html('All users: ' + data);
      },
    });
  });


  //var firstInput = document.getElementById("insertPsw1").value;
  //var secondInput = document.getElementById("insertPsw2").value;

  //if( firstInput === secondInput){
  /*if( 1 === 2){*/
    $('#insertButton').click(() => {

      var firstInput = document.getElementById("insertPsw1").value;
      var secondInput = document.getElementById("insertPsw2").value;
      
      var equalPasswords = firstInput === secondInput;
      console.log(equalPasswords);

      if(equalPasswords) {
      $.ajax({
        // all URLs are relative to http://localhost:3000/
        url: 'users',
        type: 'POST', // <-- this is POST, not GET
        data: {
                name: $('#insertEmail').val(),
                password: $('#insertPsw1').val(),
              },
        success: (data) => {
          $('#status').html(data.message);
        }
      });
    }else{
      //$("pass").html('Invalid username or password');
      //document.getElementById("content").innerHTML = "Invalid username or password";
    }
    });
//}else {
  //console.log('no matching password');
  //$("pass").update('Invalid username or password');
//}
  // define a generic Ajax error handler:
  // http://api.jquery.com/ajaxerror/
  $(document).ajaxError(() => {
    $('#status').html('Error: unknown ajaxError!');
  });
});
</script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="home.html">Logo</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav text-center">
      <li class="nav-item active">
        <a class="nav-link" href="profile.html">Create Account <span class="sr-only">(current)</span></a>
      </li>

    </ul>
    <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Account
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="favorites.html">Favorite</a>
                <a class="dropdown-item" href="profile.html">Profile</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="index.html">Logout</a>
          </div>
        </li>
    </ul>
  </div>
</nav> <!-- end of head navbar-->




 
  <button id="readButton">Get profile</button>
  <button id="allUsersButton">Get all usernames</button>

  <div id="jobDiv"></div>
  <img id="petImage"></img>

  <!--
  <hr/>
  Name: <input id="insertNameBox" type="text" size="20"/>
  Job: <input id="insertJobBox" type="text" size="20"/>
  Pet: <input id="insertPetBox" type="text" size="20"/>
  <button id="insertButton">Insert into database</button>
  -->
  <hr/>
  <div id="status"></div>









        <section id = "body_container">
            <div class = "content">
                <div class = "container">
                    <div class = "row">
                        <br><br>
                        <div class="col-lg-2"></div>
                        <div class= "col-lg-8">
                            <br><br>



                               <form action="#" onsubmit="return false" >
                                <div class="container">
                                  <h1>Register</h1>
                                  <p>Please fill in this form to create an account.</p>
                                  <hr>

                                  <label  for="email"><b>Email</b></label>
                                  <input id="insertEmail" type="text"  placeholder="Enter Email" name="email" required>

                                  <label for="psw"><b>Password</b></label>
                                  <input id="insertPsw1" type="password" placeholder="Enter Password" name="psw" required>

                                  <label for="psw-repeat"><b>Repeat Password</b></label>
                                  <input id="insertPsw2" type="password" placeholder="Repeat Password" name="psw-repeat" required>
                                  <hr>
                                  <p>By creating an account you agree to our <a href="#">Terms & Privacy</a>.</p>

                                  <button id="insertButton" type="submit" class="registerbtn">Register</button>
                                  <div id="pass"></div>
                                </div>
                                
                                <div class="container signin">
                                  <p>Already have an account? <a href="#">Sign in</a>.</p>
                                </div>
                              </form>




                        </div>
                        <div class="col-lg-2"></div>
                    </div>
                </div>
            </div>
        </section>


<!--
        <section id = "body_container">
            <div class = "content">
                <div class = "container">
                    <div class = "row">
                        <br><br>
                        <div class="col-lg-2"></div>
                        <div class= "col-lg-8">
                            <br><br>

                            <button id="backBtn" ><a href="home.html">BACK</a></button>
                        </div>
                        <div class="col-lg-2"></div>
                    </div>
                </div>
            </div>
        </section>

  </div>
</div>
</body>
</html>