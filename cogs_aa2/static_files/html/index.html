<!DOCTYPE html>
<head>
<title>COGS 121</title>

<script src="jquery-3.3.1.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">


 <script type="text/javascript"> //copied from account.html 
// jQuery convention for running when the document has been fully loaded:
$(document).ready(() => {
  
  $('#submit_btn').click(() => {
    //const userNameInput = $('#exampleInputEmail1').val();
    var userNameInput = document.getElementById("exampleInputEmail1").value;
    var userPassInput = document.getElementById("exampleInputPassword1").value;
    console.log('USERNAME: ' + userNameInput + ' PASSWORD: ' + userPassInput);
      
    const urlInput = 'users/' + userNameInput;

    $.ajax({
        url: urlInput,
        type: 'GET',
        dataType: 'json',
        success: (data) => {
            //user exists
            if(data.password != userPassInput) {
                //incorrect password
                console.log("WRONG password");
            }
            else {
                //direct the user to homepage
                console.log("CORRECT password");
                window.location.replace("home.html");
            }
        },
    });
  });

  $('#readButton').click(() => {
    const requestURL = 'users/' + $('#nameBox').val();
    console.log('making ajax request to:', requestURL);
    // From: http://learn.jquery.com/ajax/jquery-ajax-methods/
    // Using the core $.ajax() method since it's the most flexible.
    // ($.get() and $.getJSON() are nicer convenience functions)
    $.ajax({
      // all URLs are relative to http://localhost:3000/
      url: requestURL,
      type: 'GET',
      dataType : 'json', // this URL returns data in JSON format
      success: (data) => {
        console.log('You received some data!', data);
        if (data.password) {
          $('#status').html('Successfully fetched data at URL: ' + requestURL);
          $('#jobDiv').html('My job is ' + data.password);
        } else {
          $('#status').html('Error: could not find user at URL: ' + requestURL);
          // clear the display
          $('#jobDiv').html('');
        }
      },
    });
  });

  $('#allUsersButton').click(() => {
    $.ajax({
      url: 'users',
      type: 'GET',
      dataType : 'json',
      success: (data) => {
        console.log('You received some data!', data);
        $('#status').html('All users: ' + data);
      },
    });
  });
  }); //end of account.html

</script>

</head>
<body>






  
  <button id="readButton">Get profile</button>
  <button id="allUsersButton">Get all usernames</button>

  <div id="jobDiv"></div>
  <img id="petImage"></img>

  <!--
  <hr/>
  Name: <input id="insertNameBox" type="text" size="20"/>
  Job: <input id="insertJobBox" type="text" size="20"/>
  Pet: <input id="insertPetBox" type="text" size="20"/>
  <button id="insertButton">Insert into database</button>
  -->
  <hr/>
  <div id="status"></div>




<div class = "content-wrap">
    <div class = "content">
<br><br>

        <section id = "top_login">
            <div class = "container">
                <div class = "row">
                    <div class = "col-lg-4"></div>
                    <div class = "col-lg-4"><h4>logo image placeholder</h4></div>
                    <div class = "col-lg-4"></div>
                </div>
            </div>
        </section>

        <section id = "mid_login">
            <div class = "content">
                <div class = "container">

                    <div class = "row">
                        <br><br>
                        <div class="col-lg-4"></div>
                        <div class= "col-lg-4">
                            <br><br>
                            <form>
                                <div class="form-group">
                                    <label for="exampleInputEmail1">Email address</label>
                                    <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
                                    <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                                </div>
                                <div class="form-group" id="pw_div">
                                    <label for="exampleInputPassword1">Password</label>
                                    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
                                </div>
                                <button id="submit_btn" type="submit" class="btn btn-outline-primary" >Submit</button>
                            </form>
                        </div>
                        <div class="col-lg-4"></div>

                    </div> <!-- end of row-->

                    <div class = "row">
                        <br><br>
                        <div class="col-lg-4"></div>
                        <div class= "col-lg-2">
                            <br><br>
                            <button id ="signupBtn" type="button" class="btn btn-outline-danger"><a href = "account.html">Signup</a></button>
                        </div>
                        <div class="col-lg-2">
                            <br><br>
                            <button id = "fbBtn" type="button" class="btn btn-outline-info">Facebook</button>
                        </div>
                        <div class="col-lg-4"></div>

                    </div> <!-- end of row-->

                </div>
            </div>
        </section>

  </div>
</div>
</body>
</html>
