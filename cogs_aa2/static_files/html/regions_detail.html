<html>
<head>
<title>NeuroViz</title>

<script src="jquery-3.3.1.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link rel="stylesheet" href="../css/style.css"/>
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
<link href="../css/style.css" rel="stylesheet"> <!-- stylesheet css--> 
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mina">
<!--<script src="../js/regions.js"></script>-->
<script type="text/javascript">

  let timerGoing = false;
  let time = 0;
  let prevPage = '';
  let totalTime = 0;

  function handleTime(currentPage){

    let currentTime = Date.now();
    if(timerGoing){
      totalTime = (currentTime - time)/1000;
      console.log(totalTime);
      console.log(prevPage);
      //let pageTimeRow = prevPage + 'Time';
      //let pageVisitsRow = prevPage + 'Visits';

      //userdb.run("UPDATE users_to_pets SET " + pageTimeRow + " = " + totalTime + 
      //" WHERE name = 'Ryan'");
      $.ajax({
        url: 'users/Amparo',
        type: 'GET',
        dataType: 'json',
        success: (data) => {
          data.prevPage 
        }
      });
      ////

      $.ajax({
        // all URLs are relative to http://localhost:3000/
        url: 'users/Amparo',
        type: 'POST', // <-- this is POST, not GET
        data: {
                prevPage: prevPage,
                totalTime: totalTime,
              },
        success: (data) => {
          $('#status').html(data.message);
        }
      });

      ////

      // Get existing dtabase time from prevPage
      // Add totalTime to that
      // Push new value to database
      if(prevPage != currentPage){
      // Add one to prevPage page visits
      }
      
    }else{
      timerGoing = true;
    }

    time = currentTime;
    prevPage = currentPage;

  };

 $(document).ready(() => {

    timerGoing = false;

     $('#midbrain').click(() => {
        
        handleTime('midbrain');

        const requestURL = 'options/' + 'Midbrain';

      

      $.ajax({
        url: requestURL,
        type:'GET',
        dataType: 'json',
        success: (data) => {
           $('#hero_title').html(data.region);
           //$('#bread_title').html(data.region);

           $('#lead').html(data.inst);
           $('#detail_content').html(data.detail);

        }

      })


     }); //end of midbrain


     $('#hindbrain').click(() => {

        handleTime('hindbrain');

        const requestURL = 'options/' + 'Hindbrain';

        $.ajax({
        url: requestURL,
        type:'GET',
        dataType: 'json',
        success: (data) => {
           $('#hero_title').html(data.region);
          // $('#bread_title').html(data.region);
           $('#lead').html(data.inst);
           $('#detail_content').html(data.detail);


        }
      })
     }); // end of hindbrain

    $('#cerebral').click(() => {

        handleTime('cerebral');

        const requestURL = 'options/' + 'Cerebral Cortex';

      $.ajax({
        url: requestURL,
        type:'GET',
        dataType: 'json',
        success: (data) => {  
           $('#hero_title').html(data.region);
           //$('#bread_title').html(data.region);

           $('#lead').html(data.inst);
           $('#detail_content').html(data.detail);
        }

      })
     }); //end of cerebral

    $('#forebrain').click(() => {

        handleTime('forebrain');

        const requestURL = 'options/' + 'Forebrain';

      $.ajax({
        url: requestURL,
        type:'GET',
        dataType: 'json',
        success: (data) => {
           $('#hero_title').html(data.region);
           //$('#bread_title').html(data.region);

           $('#lead').html(data.inst);
           $('#detail_content').html(data.detail);
        }
      })
     }); //end of forebrain
 });

</script> 

</head>
<body>
 <nav class="navbar navbar-expand-lg navbar-light bg-light" id = "navbar_color">
  <a class="navbar-brand" href="home.html">NeuroViz
    <!--<img src="../img/logo_navbar.png" width="20%" height="auto" class="img-fluid">-->
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav text-center">
      <li class="nav-item active">
          <!-- start of breadcrumb -->    
          <!--
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item" id="home_bread"><a href="home.html">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page" id="bread_title"></li>
            </ol>
          </nav>--><!-- end of breadcrumb -->
          <a class="nav-link" href="regions_detail.html">Regions Page <span class="sr-only">(current)</span></a>
      </li>
    </ul>

    <ul class="navbar-nav ml-auto">
       <li class="nav-item active">
        <a class="nav-link" href="index.html"> Logout <span class="sr-only">(current)</span></a>
      </li>
    </ul>
  </div>
</nav> <!-- end of head navbar-->

        <section id ="top_container">
          <div class="content">
            <div class="container">

               <div class = "row" id="region_btns">
                  <div class = "col-lg-3"></div>
                  <div class = "col-lg-6">
                      <button type="button" class="btn btn-outline-dark" id="hindbrain">hindbrain</button>
                      <button type="button" class="btn btn-outline-dark" id="midbrain">midbrain</button>
                      <button type="button" class="btn btn-outline-dark" id="forebrain">forebrain</button>
                      <button type="button" class="btn btn-outline-dark" id="cerebral">cerebral cortex</button>
                  </div>
                  <div class = "col-lg-3"></div>
                </div>

              <div class="row">
                <div class="col-md">
                  <div class="jumbotron jumbotron-fluid">
                    <div class="container" id="top_jumbo">
                      <h1 class="display-4" id="hero_title"></h1>
                      <hr>
                      <p id="lead"> </p>
                        </div>
                    </div>
                  </div>
                </div>


              </div>
            </div>
          </div>
        </section>

        <section id = "body_container">
            <div class = "content">
                <div class = "container-fluid">
                    <div class = "row" id="detail_div">
                        <br><br>
                        <div class="col-md-2"></div>
                        <div class="col-md-8">
                            <h3 id="detail_title"></h3>
                            <p id="detail_content"></p>
                        </div>
                               
                        <div class="col-md-2"></div>
                        </div>
                    </div>
                  </div>
                </div>
            </section>

              <section id = "body_container">
                  <div class = "content">
                      <div class = "container">
                          <div class = "row">
                              <br><br>
                              <div class="col-lg-2"></div>
                              <div class= "col-lg-8">
                                  <br><br>
                                  <a href="home.html"><img src = "../img/back_btn.png"></a>
                              </div>
                              <div class="col-lg-2"></div>


                          </div>
                      </div>
                  </div>
              </section>

  </div>
</div>
</body>
</html>
